<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç›´æ’­æ‰‹å¡ç”Ÿæˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        
        .input-panel {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .input-panel h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #ff6b9d;
        }
        
        .input-group textarea {
            height: 80px;
            resize: vertical;
        }
        
        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b9d, #ff8fab);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
        }
        
        .card-preview {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .card-preview h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
            text-align: center;
        }
        
        .card {
            width: 100%;
            max-width: 600px;
            background: white;
            border: 3px solid #ff6b9d;
            border-radius: 10px;
            padding: 20px;
            margin: 0 auto;
        }
        
        .top-row {
            display: flex;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .brand-box {
            flex: 1;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
        }
        
        .brand-label {
            color: #ff6b9d;
            font-weight: bold;
            font-size: 12px;
        }
        
        .brand-text, .product-text {
            font-size: 16px;
            font-weight: bold;
            border: none;
            background: transparent;
            width: 100%;
            text-align: center;
            outline: none;
            cursor: text;
        }
        
        .product-box {
            flex: 3;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
        }
        
        .product-label {
            color: #ff6b9d;
            font-weight: bold;
            font-size: 12px;
        }
        
        .middle-row {
            display: flex;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .image-box {
            flex: 2;
            border: 2px solid #333;
            padding: 20px;
            text-align: center;
            background-color: #f8f8f8;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .image-text {
            color: #666;
            font-size: 14px;
        }
        
        .price-section {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .price-row {
            display: flex;
            gap: 10px;
        }
        
        .price-box {
            flex: 1;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
        }
        
        .price-label {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .original-price {
            color: #333;
        }
        
        .live-price {
            color: #ff6b9d;
        }
        
        .discount {
            color: #ff6b9d;
        }
        
        .price-value {
            font-size: 16px;
            font-weight: bold;
            border: none;
            background: transparent;
            width: 100%;
            text-align: center;
            outline: none;
            cursor: text;
        }
        
        .info-box {
            flex: 1;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
            min-height: 60px;
        }
        
        .info-label {
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .mechanism {
            color: #ff6b9d;
        }
        
        .service {
            color: #ff6b9d;
        }
        
        .inventory {
            color: #ff6b9d;
        }
        
        .info-text {
            font-size: 12px;
            line-height: 1.3;
            border: none;
            background: transparent;
            width: 100%;
            text-align: center;
            outline: none;
            cursor: text;
            min-height: 30px;
            resize: none;
        }
        
        .highlight-box {
            border: 2px solid #333;
            padding: 15px;
            margin-top: 15px;
            background-color: #f8f8f8;
        }
        
        .highlight-label {
            color: #ff6b9d;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .highlight-text {
            font-size: 13px;
            line-height: 1.4;
            border: none;
            background: transparent;
            width: 100%;
            outline: none;
            cursor: text;
            min-height: 100px;
            resize: vertical;
        }
        
        .export-btn {
            width: 100%;
            padding: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
        }
        
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- è¾“å…¥é¢æ¿ -->
        <div class="input-panel">
            <h2>ğŸ“‹ å•†å“ä¿¡æ¯è¾“å…¥</h2>
            <form id="productForm">
                <div class="input-group">
                    <label>å•†å“ä¿¡æ¯ï¼ˆå®Œæ•´æ–‡æœ¬ï¼‰:</label>
                    <textarea id="productInfo" placeholder="è¯·ç²˜è´´å®Œæ•´çš„å•†å“ä¿¡æ¯æ–‡æœ¬ï¼Œæ ¼å¼å¦‚ï¼šSmily miaè¾…é£Ÿå‹º Smily mia 69 58.65 25% æ—  è¿è´¹é™©,ä¸ƒå¤©æ— ç†ç”± äº§å“æè¿°..."></textarea>
                </div>
                <button type="button" class="generate-btn" onclick="parseAndGenerate()">ğŸš€ æ™ºèƒ½è§£æç”Ÿæˆ</button>
            </form>
            
            <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee;">
                <h3 style="color: #333; margin-bottom: 15px;">âœï¸ æ‰‹åŠ¨è¾“å…¥</h3>
                <div class="input-group">
                    <label>å“ç‰Œå:</label>
                    <input type="text" id="brand" placeholder="å“ç‰Œå">
                </div>
                <div class="input-group">
                    <label>å•†å“å:</label>
                    <input type="text" id="productName" placeholder="å•†å“å">
                </div>
                <div class="input-group">
                    <label>æ—¥å¸¸ä»·:</label>
                    <input type="text" id="originalPrice" placeholder="åŸä»·">
                </div>
                <div class="input-group">
                    <label>ç›´æ’­ä»·:</label>
                    <input type="text" id="livePrice" placeholder="ç›´æ’­ä»·">
                </div>
                <div class="input-group">
                    <label>ä¼˜æƒ :</label>
                    <input type="text" id="discount" placeholder="æŠ˜æ‰£">
                </div>
                <div class="input-group">
                    <label>æœºåˆ¶:</label>
                    <input type="text" id="mechanism" placeholder="å…å•/ç½®é¡¶/ç§’æ€">
                </div>
                <div class="input-group">
                    <label>å”®å:</label>
                    <input type="text" id="service" placeholder="è¿è´¹é™©/ä¸ƒå¤©æ— ç†ç”±">
                </div>
                <div class="input-group">
                    <label>åº“å­˜:</label>
                    <input type="text" id="inventory" placeholder="ç°è´§/é¢„å”®">
                </div>
                <div class="input-group">
                    <label>æ ¸å¿ƒå–ç‚¹:</label>
                    <textarea id="highlights" placeholder="äº§å“æ ¸å¿ƒå–ç‚¹å’Œæ¯å©´å»ºè®®"></textarea>
                </div>
                <button type="button" class="generate-btn" onclick="generateFromForm()">ğŸ“ æ‰‹åŠ¨ç”Ÿæˆ</button>
            </div>
        </div>
        
        <!-- æ‰‹å¡é¢„è§ˆ -->
        <div class="card-preview">
            <h2>ğŸ¨ æ‰‹å¡é¢„è§ˆ</h2>
            <div class="card" id="liveCard">
                <!-- é¡¶éƒ¨è¡Œ -->
                <div class="top-row">
                    <div class="brand-box">
                        <div class="brand-label">å“ç‰Œå</div>
                        <input type="text" class="brand-text" id="editBrand" value="å“ç‰Œå" />
                    </div>
                    <div class="product-box">
                        <div class="product-label">å•†å“å</div>
                        <input type="text" class="product-text" id="editProductName" value="å•†å“å" />
                    </div>
                </div>

                <!-- ä¸­é—´è¡Œ -->
                <div class="middle-row">
                    <div class="image-box">
                        <div class="image-text">å•†å“å›¾ç‰‡</div>
                    </div>
                    <div class="price-section">
                        <div class="price-row">
                            <div class="price-box">
                                <div class="price-label original-price">æ—¥å¸¸ä»·</div>
                                <input type="text" class="price-value" id="editOriginalPrice" value="Â¥0" />
                            </div>
                            <div class="price-box">
                                <div class="price-label live-price">ç›´æ’­ä»·</div>
                                <input type="text" class="price-value" id="editLivePrice" value="Â¥0" />
                            </div>
                            <div class="price-box">
                                <div class="price-label discount">ä¿ƒé”€</div>
                                <input type="text" class="price-value" id="editDiscount" value="æ— " />
                            </div>
                        </div>
                        <div class="price-row">
                            <div class="info-box">
                                <div class="info-label mechanism">æœºåˆ¶<br>(å…å•/ç½®é¡¶/ç§’æ€)</div>
                                <textarea class="info-text" id="editMechanism">æ— </textarea>
                            </div>
                            <div class="info-box">
                                <div class="info-label service">å”®å<br>(è¿è´¹é™©/7å¤©æ— ç†ç”±)</div>
                                <textarea class="info-text" id="editService">æ ‡å‡†å”®å</textarea>
                            </div>
                            <div class="info-box">
                                <div class="info-label inventory">åº“å­˜<br>(ç°è´§/é¢„å”®)</div>
                                <textarea class="info-text" id="editInventory">ç°è´§</textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ ¸å¿ƒå–ç‚¹ -->
                <div class="highlight-box">
                    <div class="highlight-label">æ ¸å¿ƒå–ç‚¹/æ¯å©´å»ºè®®</div>
                    <textarea class="highlight-text" id="editHighlights">è¯·è¾“å…¥äº§å“æ ¸å¿ƒå–ç‚¹å’Œæ¯å©´å»ºè®®...</textarea>
                </div>
            </div>
            
            <button class="export-btn" onclick="exportCard()">ğŸ’¾ å¯¼å‡ºä¸ºå›¾ç‰‡</button>
        </div>
    </div>

    <script>
        // æ™ºèƒ½è§£æå•†å“ä¿¡æ¯
        function parseAndGenerate() {
            const productInfo = document.getElementById('productInfo').value.trim();
            if (!productInfo) {
                alert('è¯·è¾“å…¥å•†å“ä¿¡æ¯ï¼');
                return;
            }

            console.log('åŸå§‹è¾“å…¥:', productInfo); // è°ƒè¯•ç”¨
            
            // æŒ‰ç©ºæ ¼åˆ†å‰²ï¼Œä½†ä¿ç•™åé¢çš„é•¿æè¿°
            const parts = productInfo.split(' ');
            console.log('åˆ†å‰²åçš„éƒ¨åˆ†:', parts); // è°ƒè¯•ç”¨
            
            let productName = '';
            let brand = '';
            let originalPrice = '';
            let livePrice = '';
            let discount = '';
            let mechanism = '';
            let service = '';
            let description = '';
            
            // æ ¹æ®æ‚¨çš„æ ¼å¼ï¼šå•†å“å å“ç‰Œ åŸä»· ç°ä»· æŠ˜æ‰£% æœºåˆ¶ æœåŠ¡ æè¿°
            if (parts.length >= 7) {
                productName = parts[0] || '';
                brand = parts[1] || '';
                
                // æŸ¥æ‰¾æ•°å­—ä½œä¸ºä»·æ ¼
                const priceRegex = /^\d+(\.\d+)?$/;
                let priceIndex = 2;
                
                // åŸä»·
                if (parts[priceIndex] && priceRegex.test(parts[priceIndex])) {
                    originalPrice = parts[priceIndex];
                    priceIndex++;
                }
                
                // ç°ä»·
                if (parts[priceIndex] && priceRegex.test(parts[priceIndex])) {
                    livePrice = parts[priceIndex];
                    priceIndex++;
                }
                
                // æŠ˜æ‰£
                if (parts[priceIndex] && parts[priceIndex].includes('%')) {
                    const discountMatch = parts[priceIndex].match(/(\d+)%/);
                    if (discountMatch) {
                        const discountPercent = parseInt(discountMatch[1]);
                        // 25% è¡¨ç¤ºæ‰“75æŠ˜
                        discount = (100 - discountPercent) / 10 + 'æŠ˜';
                    }
                    priceIndex++;
                }
                
                // æœºåˆ¶
                if (parts[priceIndex]) {
                    mechanism = parts[priceIndex];
                    priceIndex++;
                }
                
                // æœåŠ¡ - æŸ¥æ‰¾åŒ…å«é€—å·çš„éƒ¨åˆ†
                let serviceIndex = priceIndex;
                while (serviceIndex < parts.length) {
                    if (parts[serviceIndex] && (parts[serviceIndex].includes('é™©') || parts[serviceIndex].includes('ç†ç”±') || parts[serviceIndex].includes(','))) {
                        service = parts[serviceIndex].replace(/,/g, '\n');
                        serviceIndex++;
                        break;
                    }
                    serviceIndex++;
                }
                
                // æè¿° - å‰©ä½™éƒ¨åˆ†
                if (serviceIndex < parts.length) {
                    description = parts.slice(serviceIndex).join(' ');
                }
            }
            
            console.log('è§£æç»“æœ:', {
                productName, brand, originalPrice, livePrice, 
                discount, mechanism, service, description
            }); // è°ƒè¯•ç”¨
            
            // æ›´æ–°æ‰‹å¡
            updateCard({
                brand: brand || 'å“ç‰Œå',
                productName: productName || 'å•†å“å',
                originalPrice: originalPrice ? 'Â¥' + originalPrice : 'Â¥0',
                livePrice: livePrice ? 'Â¥' + livePrice : 'Â¥0',
                discount: discount || 'æ— ',
                mechanism: mechanism || 'æ— ',
                service: service || 'æ ‡å‡†å”®å',
                inventory: 'ç°è´§',
                highlights: formatHighlights(description)
            });
        }
        
        // æ ¼å¼åŒ–å–ç‚¹æè¿°
        function formatHighlights(description) {
            if (!description) return 'è¯·è¾“å…¥äº§å“æ ¸å¿ƒå–ç‚¹å’Œæ¯å©´å»ºè®®...';
            
            // æŒ‰æ•°å­—å¼€å¤´çš„å¥å­åˆ†å‰²
            const sentences = description.split(/(?=\d+\.)/);
            let formatted = '';
            
            sentences.forEach((sentence, index) => {
                const trimmed = sentence.trim();
                if (trimmed) {
                    if (trimmed.match(/^\d+\./)) {
                        // å·²ç»æœ‰ç¼–å·çš„å¥å­
                        formatted += `âœ¨ ${trimmed}\n`;
                    } else {
                        // æ²¡æœ‰ç¼–å·çš„å¥å­ï¼Œæ·»åŠ è¡¨æƒ…ç¬¦å·
                        formatted += `ğŸ¯ ${trimmed}\n`;
                    }
                }
            });
            
            return formatted || description;
        }
        
        // æ‰‹åŠ¨ç”Ÿæˆ
        function generateFromForm() {
            const data = {
                brand: document.getElementById('brand').value || 'å“ç‰Œå',
                productName: document.getElementById('productName').value || 'å•†å“å',
                originalPrice: document.getElementById('originalPrice').value || 'Â¥0',
                livePrice: document.getElementById('livePrice').value || 'Â¥0',
                discount: document.getElementById('discount').value || 'æ— ',
                mechanism: document.getElementById('mechanism').value || 'æ— ',
                service: document.getElementById('service').value || 'æ ‡å‡†å”®å',
                inventory: document.getElementById('inventory').value || 'ç°è´§',
                highlights: document.getElementById('highlights').value || 'è¯·è¾“å…¥äº§å“æ ¸å¿ƒå–ç‚¹å’Œæ¯å©´å»ºè®®...'
            };
            
            updateCard(data);
        }
        
        // æ›´æ–°æ‰‹å¡
        function updateCard(data) {
            document.getElementById('editBrand').value = data.brand;
            document.getElementById('editProductName').value = data.productName;
            document.getElementById('editOriginalPrice').value = data.originalPrice;
            document.getElementById('editLivePrice').value = data.livePrice;
            document.getElementById('editDiscount').value = data.discount;
            document.getElementById('editMechanism').value = data.mechanism;
            document.getElementById('editService').value = data.service;
            document.getElementById('editInventory').value = data.inventory;
            document.getElementById('editHighlights').value = data.highlights;
        }
        
        // å¯¼å‡ºåŠŸèƒ½ï¼ˆç®€åŒ–ç‰ˆï¼Œå®é™…ä½¿ç”¨éœ€è¦ html2canvas åº“ï¼‰
        function exportCard() {
            alert('å¯¼å‡ºåŠŸèƒ½éœ€è¦é›†æˆ html2canvas åº“ã€‚\næ‚¨å¯ä»¥å³é”®ç‚¹å‡»æ‰‹å¡åŒºåŸŸé€‰æ‹©"ä¿å­˜å›¾ç‰‡"ï¼Œæˆ–è€…æˆªå›¾ä¿å­˜ã€‚');
        }
        
        // è‡ªåŠ¨è°ƒæ•´æ–‡æœ¬æ¡†é«˜åº¦
        document.addEventListener('DOMContentLoaded', function() {
            const textareas = document.querySelectorAll('textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = this.scrollHeight + 'px';
                });
            });
        });
    </script>
</body>
</html>