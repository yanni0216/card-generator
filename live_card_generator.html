<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Áõ¥Êí≠ÊâãÂç°ÁîüÊàêÂô®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }
        
        .input-panel {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .input-panel h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #ff6b9d;
        }
        
        .input-group textarea {
            height: 80px;
            resize: vertical;
        }
        
        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b9d, #ff8fab);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
        }
        
        .card-preview {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .card-preview h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
            text-align: center;
        }
        
        .card {
            width: 100%;
            max-width: 600px;
            background: white;
            border: 3px solid #ff6b9d;
            border-radius: 10px;
            padding: 20px;
            margin: 0 auto;
        }
        
        .top-row {
            display: flex;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .brand-box {
            flex: 1;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
        }
        
        .brand-label {
            color: #ff6b9d;
            font-weight: bold;
            font-size: 12px;
        }
        
        .brand-text, .product-text {
            font-size: 16px;
            font-weight: bold;
            border: none;
            background: transparent;
            width: 100%;
            text-align: center;
            outline: none;
            cursor: text;
        }
        
        .product-box {
            flex: 3;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
        }
        
        .product-label {
            color: #ff6b9d;
            font-weight: bold;
            font-size: 12px;
        }
        
        .middle-row {
            display: flex;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .image-box {
            flex: 2;
            border: 2px solid #333;
            padding: 20px;
            text-align: center;
            background-color: #f8f8f8;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .image-text {
            color: #666;
            font-size: 14px;
        }
        
        .price-section {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .price-row {
            display: flex;
            gap: 10px;
        }
        
        .price-box {
            flex: 1;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
        }
        
        .price-label {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .original-price {
            color: #333;
        }
        
        .live-price {
            color: #ff6b9d;
        }
        
        .discount {
            color: #ff6b9d;
        }
        
        .price-value {
            font-size: 16px;
            font-weight: bold;
            border: none;
            background: transparent;
            width: 100%;
            text-align: center;
            outline: none;
            cursor: text;
        }
        
        .info-box {
            flex: 1;
            border: 2px solid #333;
            padding: 8px;
            text-align: center;
            background-color: #f8f8f8;
            min-height: 60px;
        }
        
        .info-label {
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .mechanism {
            color: #ff6b9d;
        }
        
        .service {
            color: #ff6b9d;
        }
        
        .inventory {
            color: #ff6b9d;
        }
        
        .info-text {
            font-size: 12px;
            line-height: 1.3;
            border: none;
            background: transparent;
            width: 100%;
            text-align: center;
            outline: none;
            cursor: text;
            min-height: 30px;
            resize: none;
        }
        
        .highlight-box {
            border: 2px solid #333;
            padding: 15px;
            margin-top: 15px;
            background-color: #f8f8f8;
        }
        
        .highlight-label {
            color: #ff6b9d;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .highlight-text {
            font-size: 13px;
            line-height: 1.4;
            border: none;
            background: transparent;
            width: 100%;
            outline: none;
            cursor: text;
            min-height: 100px;
            resize: vertical;
        }
        
        .export-btn {
            width: 100%;
            padding: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
        }
        
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ËæìÂÖ•Èù¢Êùø -->
        <div class="input-panel">
            <h2>üìã ÂïÜÂìÅ‰ø°ÊÅØËæìÂÖ•</h2>
            <form id="productForm">
                <div class="input-group">
                    <label>ÂïÜÂìÅ‰ø°ÊÅØÔºàÂÆåÊï¥ÊñáÊú¨Ôºâ:</label>
                    <textarea id="productInfo" placeholder="ËØ∑Á≤òË¥¥ÂÆåÊï¥ÁöÑÂïÜÂìÅ‰ø°ÊÅØÊñáÊú¨ÔºåÊ†ºÂºèÂ¶ÇÔºöSmily miaËæÖÈ£üÂã∫ Smily mia 69 58.65 25% Êó† ËøêË¥πÈô©,‰∏ÉÂ§©Êó†ÁêÜÁî± ‰∫ßÂìÅÊèèËø∞..."></textarea>
                </div>
                <button type="button" class="generate-btn" onclick="parseAndGenerate()">üöÄ Êô∫ËÉΩËß£ÊûêÁîüÊàê</button>
            </form>
            
            <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee;">
                <h3 style="color: #333; margin-bottom: 15px;">‚úèÔ∏è ÊâãÂä®ËæìÂÖ•</h3>
                <div class="input-group">
                    <label>ÂìÅÁâåÂêç:</label>
                    <input type="text" id="brand" placeholder="ÂìÅÁâåÂêç">
                </div>
                <div class="input-group">
                    <label>ÂïÜÂìÅÂêç:</label>
                    <input type="text" id="productName" placeholder="ÂïÜÂìÅÂêç">
                </div>
                <div class="input-group">
                    <label>Êó•Â∏∏‰ª∑:</label>
                    <input type="text" id="originalPrice" placeholder="Âéü‰ª∑">
                </div>
                <div class="input-group">
                    <label>Áõ¥Êí≠‰ª∑:</label>
                    <input type="text" id="livePrice" placeholder="Áõ¥Êí≠‰ª∑">
                </div>
                <div class="input-group">
                    <label>‰ºòÊÉ†:</label>
                    <input type="text" id="discount" placeholder="ÊäòÊâ£">
                </div>
                <div class="input-group">
                    <label>Êú∫Âà∂:</label>
                    <input type="text" id="mechanism" placeholder="ÂÖçÂçï/ÁΩÆÈ°∂/ÁßíÊùÄ">
                </div>
                <div class="input-group">
                    <label>ÂîÆÂêé:</label>
                    <input type="text" id="service" placeholder="ËøêË¥πÈô©/‰∏ÉÂ§©Êó†ÁêÜÁî±">
                </div>
                <div class="input-group">
                    <label>Â∫ìÂ≠ò:</label>
                    <input type="text" id="inventory" placeholder="Áé∞Ë¥ß/È¢ÑÂîÆ">
                </div>
                <div class="input-group">
                    <label>Ê†∏ÂøÉÂçñÁÇπ:</label>
                    <textarea id="highlights" placeholder="‰∫ßÂìÅÊ†∏ÂøÉÂçñÁÇπÂíåÊØçÂ©¥Âª∫ËÆÆ"></textarea>
                </div>
                <button type="button" class="generate-btn" onclick="generateFromForm()">üìù ÊâãÂä®ÁîüÊàê</button>
            </div>
        </div>
        
        <!-- ÊâãÂç°È¢ÑËßà -->
        <div class="card-preview">
            <h2>üé® ÊâãÂç°È¢ÑËßà</h2>
            <div class="card" id="liveCard">
                <!-- È°∂ÈÉ®Ë°å -->
                <div class="top-row">
                    <div class="brand-box">
                        <div class="brand-label">ÂìÅÁâåÂêç</div>
                        <input type="text" class="brand-text" id="editBrand" value="ÂìÅÁâåÂêç" />
                    </div>
                    <div class="product-box">
                        <div class="product-label">ÂïÜÂìÅÂêç</div>
                        <input type="text" class="product-text" id="editProductName" value="ÂïÜÂìÅÂêç" />
                    </div>
                </div>

                <!-- ‰∏≠Èó¥Ë°å -->
                <div class="middle-row">
                    <div class="image-box">
                        <div class="image-text">ÂïÜÂìÅÂõæÁâá</div>
                    </div>
                    <div class="price-section">
                        <div class="price-row">
                            <div class="price-box">
                                <div class="price-label original-price">Êó•Â∏∏‰ª∑</div>
                                <input type="text" class="price-value" id="editOriginalPrice" value="¬•0" />
                            </div>
                            <div class="price-box">
                                <div class="price-label live-price">Áõ¥Êí≠‰ª∑</div>
                                <input type="text" class="price-value" id="editLivePrice" value="¬•0" />
                            </div>
                            <div class="price-box">
                                <div class="price-label discount">‰øÉÈîÄ</div>
                                <input type="text" class="price-value" id="editDiscount" value="Êó†" />
                            </div>
                        </div>
                        <div class="price-row">
                            <div class="info-box">
                                <div class="info-label mechanism">Êú∫Âà∂<br>(ÂÖçÂçï/ÁΩÆÈ°∂/ÁßíÊùÄ)</div>
                                <textarea class="info-text" id="editMechanism">Êó†</textarea>
                            </div>
                            <div class="info-box">
                                <div class="info-label service">ÂîÆÂêé<br>(ËøêË¥πÈô©/7Â§©Êó†ÁêÜÁî±)</div>
                                <textarea class="info-text" id="editService">Ê†áÂáÜÂîÆÂêé</textarea>
                            </div>
                            <div class="info-box">
                                <div class="info-label inventory">Â∫ìÂ≠ò<br>(Áé∞Ë¥ß/È¢ÑÂîÆ)</div>
                                <textarea class="info-text" id="editInventory">Áé∞Ë¥ß</textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ê†∏ÂøÉÂçñÁÇπ -->
                <div class="highlight-box">
                    <div class="highlight-label">Ê†∏ÂøÉÂçñÁÇπ/ÊØçÂ©¥Âª∫ËÆÆ</div>
                    <textarea class="highlight-text" id="editHighlights">ËØ∑ËæìÂÖ•‰∫ßÂìÅÊ†∏ÂøÉÂçñÁÇπÂíåÊØçÂ©¥Âª∫ËÆÆ...</textarea>
                </div>
            </div>
            
            <button class="export-btn" onclick="exportCard()">üíæ ÂØºÂá∫‰∏∫ÂõæÁâá</button>
        </div>
    </div>

    <script>
        // Êô∫ËÉΩËß£ÊûêÂïÜÂìÅ‰ø°ÊÅØ
        function parseAndGenerate() {
            const productInfo = document.getElementById('productInfo').value.trim();
            if (!productInfo) {
                alert('ËØ∑ËæìÂÖ•ÂïÜÂìÅ‰ø°ÊÅØÔºÅ');
                return;
            }

            console.log('ÂéüÂßãËæìÂÖ•:', productInfo); // Ë∞ÉËØïÁî®
            
            // ÊåâÁ©∫Ê†ºÂàÜÂâ≤Ôºå‰ΩÜ‰øùÁïôÂêéÈù¢ÁöÑÈïøÊèèËø∞
            const parts = productInfo.split(' ');
            console.log('ÂàÜÂâ≤ÂêéÁöÑÈÉ®ÂàÜ:', parts); // Ë∞ÉËØïÁî®
            
            let productName = '';
            let brand = '';
            let originalPrice = '';
            let livePrice = '';
            let discount = '';
            let mechanism = '';
            let service = '';
            let description = '';
            
            // Ê†πÊçÆÊÇ®ÁöÑÊ†ºÂºèÔºöÂïÜÂìÅÂêç ÂìÅÁâå Âéü‰ª∑ Áé∞‰ª∑ ÊäòÊâ£% Êú∫Âà∂ ÊúçÂä° ÊèèËø∞
            if (parts.length >= 7) {
                productName = parts[0] || '';
                brand = parts[1] || '';
                
                // Êü•ÊâæÊï∞Â≠ó‰Ωú‰∏∫‰ª∑Ê†º
                const priceRegex = /^\d+(\.\d+)?$/;
                let priceIndex = 2;
                
                // Âéü‰ª∑
                if (parts[priceIndex] && priceRegex.test(parts[priceIndex])) {
                    originalPrice = parts[priceIndex];
                    priceIndex++;
                }
                
                // Áé∞‰ª∑
                if (parts[priceIndex] && priceRegex.test(parts[priceIndex])) {
                    livePrice = parts[priceIndex];
                    priceIndex++;
                }
                
                // ÊäòÊâ£
                if (parts[priceIndex] && parts[priceIndex].includes('%')) {
                    const discountMatch = parts[priceIndex].match(/(\d+)%/);
                    if (discountMatch) {
                        const discountPercent = parseInt(discountMatch[1]);
                        // 25% Ë°®Á§∫Êâì75Êäò
                        discount = (100 - discountPercent) / 10 + 'Êäò';
                    }
                    priceIndex++;
                }
                
                // Êú∫Âà∂
                if (parts[priceIndex]) {
                    mechanism = parts[priceIndex];
                    priceIndex++;
                }
                
                // ÊúçÂä° - Êü•ÊâæÂåÖÂê´ÈÄóÂè∑ÁöÑÈÉ®ÂàÜ
                let serviceIndex = priceIndex;
                while (serviceIndex < parts.length) {
                    if (parts[serviceIndex] && (parts[serviceIndex].includes('Èô©') || parts[serviceIndex].includes('ÁêÜÁî±') || parts[serviceIndex].includes(','))) {
                        service = parts[serviceIndex].replace(/,/g, '\n');
                        serviceIndex++;
                        break;
                    }
                    serviceIndex++;
                }
                
                // ÊèèËø∞ - Ââ©‰ΩôÈÉ®ÂàÜ
                if (serviceIndex < parts.length) {
                    description = parts.slice(serviceIndex).join(' ');
                }
            }
            
            console.log('Ëß£ÊûêÁªìÊûú:', {
                productName, brand, originalPrice, livePrice, 
                discount, mechanism, service, description
            }); // Ë∞ÉËØïÁî®
            
            // Êõ¥Êñ∞ÊâãÂç°
            updateCard({
                brand: brand || 'ÂìÅÁâåÂêç',
                productName: productName || 'ÂïÜÂìÅÂêç',
                originalPrice: originalPrice ? '¬•' + originalPrice : '¬•0',
                livePrice: livePrice ? '¬•' + livePrice : '¬•0',
                discount: discount || 'Êó†',
                mechanism: mechanism || 'Êó†',
                service: service || 'Ê†áÂáÜÂîÆÂêé',
                inventory: 'Áé∞Ë¥ß',
                highlights: formatHighlights(description)
            });
        }
        
        // Ê†ºÂºèÂåñÂçñÁÇπÊèèËø∞
        function formatHighlights(description) {
            if (!description) return 'ËØ∑ËæìÂÖ•‰∫ßÂìÅÊ†∏ÂøÉÂçñÁÇπÂíåÊØçÂ©¥Âª∫ËÆÆ...';
            
            // ÊåâÊï∞Â≠óÂºÄÂ§¥ÁöÑÂè•Â≠êÂàÜÂâ≤
            const sentences = description.split(/(?=\d+\.)/);
            let formatted = '';
            
            sentences.forEach((sentence, index) => {
                const trimmed = sentence.trim();
                if (trimmed) {
                    if (trimmed.match(/^\d+\./)) {
                        // Â∑≤ÁªèÊúâÁºñÂè∑ÁöÑÂè•Â≠ê
                        formatted += `‚ú® ${trimmed}\n`;
                    } else {
                        // Ê≤°ÊúâÁºñÂè∑ÁöÑÂè•Â≠êÔºåÊ∑ªÂä†Ë°®ÊÉÖÁ¨¶Âè∑
                        formatted += `üéØ ${trimmed}\n`;
                    }
                }
            });
            
            return formatted || description;
        }
        
        // ÊâãÂä®ÁîüÊàê
        function generateFromForm() {
            const data = {
                brand: document.getElementById('brand').value || 'ÂìÅÁâåÂêç',
                productName: document.getElementById('productName').value || 'ÂïÜÂìÅÂêç',
                originalPrice: document.getElementById('originalPrice').value || '¬•0',
                livePrice: document.getElementById('livePrice').value || '¬•0',
                discount: document.getElementById('discount').value || 'Êó†',
                mechanism: document.getElementById('mechanism').value || 'Êó†',
                service: document.getElementById('service').value || 'Ê†áÂáÜÂîÆÂêé',
                inventory: document.getElementById('inventory').value || 'Áé∞Ë¥ß',
                highlights: document.getElementById('highlights').value || 'ËØ∑ËæìÂÖ•‰∫ßÂìÅÊ†∏ÂøÉÂçñÁÇπÂíåÊØçÂ©¥Âª∫ËÆÆ...'
            };
            
            updateCard(data);
        }
        
        // Êõ¥Êñ∞ÊâãÂç°
        function updateCard(data) {
            document.getElementById('editBrand').value = data.brand;
            document.getElementById('editProductName').value = data.productName;
            document.getElementById('editOriginalPrice').value = data.originalPrice;
            document.getElementById('editLivePrice').value = data.livePrice;
            document.getElementById('editDiscount').value = data.discount;
            document.getElementById('editMechanism').value = data.mechanism;
            document.getElementById('editService').value = data.service;
            document.getElementById('editInventory').value = data.inventory;
            document.getElementById('editHighlights').value = data.highlights;
        }
        
        // ÂØºÂá∫ÂäüËÉΩÔºàÁÆÄÂåñÁâàÔºåÂÆûÈôÖ‰ΩøÁî®ÈúÄË¶Å html2canvas Â∫ìÔºâ
        function exportCard() {
            alert('ÂØºÂá∫ÂäüËÉΩÈúÄË¶ÅÈõÜÊàê html2canvas Â∫ì„ÄÇ\nÊÇ®ÂèØ‰ª•Âè≥ÈîÆÁÇπÂáªÊâãÂç°Âå∫ÂüüÈÄâÊã©"‰øùÂ≠òÂõæÁâá"ÔºåÊàñËÄÖÊà™Âõæ‰øùÂ≠ò„ÄÇ');
        }
        
        // Ëá™Âä®Ë∞ÉÊï¥ÊñáÊú¨Ê°ÜÈ´òÂ∫¶
        document.addEventListener('DOMContentLoaded', function() {
            const textareas = document.querySelectorAll('textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = this.scrollHeight + 'px';
                });
            });
        });
    </script>
</body>
</html>